# å¾…åŠäº‹é¡¹åˆ—è¡¨

ä½¿ç”¨ Claude Agent SDK è·Ÿè¸ªå’Œæ˜¾ç¤ºå¾…åŠäº‹é¡¹ï¼Œå®ç°æœ‰ç»„ç»‡çš„ä»»åŠ¡ç®¡ç†

å¾…åŠäº‹é¡¹è·Ÿè¸ªæä¾›äº†ä¸€ç§ç»“æ„åŒ–çš„æ–¹å¼æ¥ç®¡ç†ä»»åŠ¡å¹¶å‘ç”¨æˆ·æ˜¾ç¤ºè¿›åº¦ã€‚Claude Agent SDK åŒ…å«å†…ç½®çš„å¾…åŠäº‹é¡¹åŠŸèƒ½ï¼Œæœ‰åŠ©äºç»„ç»‡å¤æ‚çš„å·¥ä½œæµç¨‹å¹¶è®©ç”¨æˆ·äº†è§£ä»»åŠ¡è¿›å±•æƒ…å†µã€‚

### å¾…åŠäº‹é¡¹ç”Ÿå‘½å‘¨æœŸ

å¾…åŠäº‹é¡¹éµå¾ªå¯é¢„æµ‹çš„ç”Ÿå‘½å‘¨æœŸï¼š

1. **åˆ›å»º** ä¸º `pending` çŠ¶æ€ï¼Œå½“ä»»åŠ¡è¢«è¯†åˆ«æ—¶
2. **æ¿€æ´»** ä¸º `in_progress` çŠ¶æ€ï¼Œå½“å·¥ä½œå¼€å§‹æ—¶
3. **å®Œæˆ** å½“ä»»åŠ¡æˆåŠŸå®Œæˆæ—¶
4. **ç§»é™¤** å½“ç»„ä¸­çš„æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆæ—¶

### ä½•æ—¶ä½¿ç”¨å¾…åŠäº‹é¡¹

SDK ä¼šè‡ªåŠ¨ä¸ºä»¥ä¸‹æƒ…å†µåˆ›å»ºå¾…åŠäº‹é¡¹ï¼š

- **å¤æ‚çš„å¤šæ­¥éª¤ä»»åŠ¡** éœ€è¦ 3 ä¸ªæˆ–æ›´å¤šä¸åŒçš„æ“ä½œ
- **ç”¨æˆ·æä¾›çš„ä»»åŠ¡åˆ—è¡¨** å½“æåˆ°å¤šä¸ªé¡¹ç›®æ—¶
- **éå¹³å‡¡çš„æ“ä½œ** å—ç›Šäºè¿›åº¦è·Ÿè¸ª
- **æ˜ç¡®è¯·æ±‚** å½“ç”¨æˆ·è¦æ±‚å¾…åŠäº‹é¡¹ç»„ç»‡æ—¶

## ç¤ºä¾‹

### ç›‘æ§å¾…åŠäº‹é¡¹å˜åŒ–

```typescript
import { query } from "@anthropic-ai/claude-agent-sdk";

for await (const message of query({
  prompt: "ä¼˜åŒ–æˆ‘çš„ React åº”ç”¨æ€§èƒ½å¹¶ä½¿ç”¨å¾…åŠäº‹é¡¹è·Ÿè¸ªè¿›åº¦",
  options: { maxTurns: 15 }
})) {
  // å¾…åŠäº‹é¡¹æ›´æ–°ä¼šåæ˜ åœ¨æ¶ˆæ¯æµä¸­
  if (message.type === "tool_use" && message.name === "TodoWrite") {
    const todos = message.input.todos;

    console.log("å¾…åŠäº‹é¡¹çŠ¶æ€æ›´æ–°ï¼š");
    todos.forEach((todo, index) => {
      const status = todo.status === "completed" ? "âœ…" :
                    todo.status === "in_progress" ? "ğŸ”§" : "âŒ";
      console.log(`${index + 1}. ${status} ${todo.content}`);
    });
  }
}
```

### å®æ—¶è¿›åº¦æ˜¾ç¤º

```typescript
import { query } from "@anthropic-ai/claude-agent-sdk";

class TodoTracker {
  private todos: any[] = [];

  displayProgress() {
    if (this.todos.length === 0) return;

    const completed = this.todos.filter(t => t.status === "completed").length;
    const inProgress = this.todos.filter(t => t.status === "in_progress").length;
    const total = this.todos.length;

    console.log(`\nè¿›åº¦ï¼š${completed}/${total} å·²å®Œæˆ`);
    console.log(`å½“å‰æ­£åœ¨å¤„ç†ï¼š${inProgress} ä¸ªä»»åŠ¡\n`);

    this.todos.forEach((todo, index) => {
      const icon = todo.status === "completed" ? "âœ…" :
                  todo.status === "in_progress" ? "ğŸ”§" : "âŒ";
      const text = todo.status === "in_progress" ? todo.activeForm : todo.content;
      console.log(`${index + 1}. ${icon} ${text}`);
    });
  }

  async trackQuery(prompt: string) {
    for await (const message of query({
      prompt,
      options: { maxTurns: 20 }
    })) {
      if (message.type === "tool_use" && message.name === "TodoWrite") {
        this.todos = message.input.todos;
        this.displayProgress();
      }
    }
  }
}

// ä½¿ç”¨æ–¹æ³•
const tracker = new TodoTracker();
await tracker.trackQuery("æ„å»ºä¸€ä¸ªå®Œæ•´çš„èº«ä»½éªŒè¯ç³»ç»Ÿå¹¶ä½¿ç”¨å¾…åŠäº‹é¡¹");
```

## ç›¸å…³æ–‡æ¡£

- TypeScript SDK å‚è€ƒ
- Python SDK å‚è€ƒ
- æµå¼ä¸å•æ¬¡æ¨¡å¼
- è‡ªå®šä¹‰å·¥å…·
