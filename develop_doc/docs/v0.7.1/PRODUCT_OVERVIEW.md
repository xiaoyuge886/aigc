## 产品概览（v0.7.1-dev-feat）

- **产品名**：AIGC Console（企业内部 AI 助手平台）  
- **版本**：v0.7.1-dev-feat  
- **定位**：统一入口的企业 AI 助手，支持业务场景配置、技能扩展、自我进化。

### 1. 目标与价值

- **统一入口**：所有 AI 能力（对话、PPT、代码、小工具）通过一个控制台使用；只要为它配置合适的 **Prompt + 场景 + Skill**，就可以不断扩展新的业务能力。  
- **场景化**：用 BusinessScenario 把「业务语境 + Prompt + 技能」打包，按人授权。  
- **可进化**：基于用户反馈自动学习偏好，动态优化系统 Prompt。

### 2. 角色与核心功能

- **普通用户**
  - 发起 / 查看会话，对话流式返回。
  - 自动场景匹配：根据提问从可用场景中选择最合适的一个，兜底通用场景。
  - 隐式使用技能（Skill）与 MCP 工具：如 PPT 生成、Todo 管理等。
  - 对单条回复点赞 / 点踩 / 纠正 / 重新生成（反馈入口）。

- **管理员**
  - 场景管理：新增 / 编辑 / 删除场景，配置 `category`、`meta`、场景 Prompt、`is_default`。  
  - 系统 Prompt 管理：维护通用 Prompt 模板。  
  - 技能管理：配置技能内容、分类、可见性（`is_public` + `created_by`）。  
  - 用户配置：为用户指定可用场景列表、用户自定义 Prompt。  
  - 偏好查看：查看用户级与会话级偏好摘要、基础使用统计。

### 3. 关键技术能力（一句话版）

- **自动场景匹配**：ScenarioMatcher 用模型在候选场景中选一个 `id`，无匹配时回退默认场景。  
- **Prompt 组合**：PromptComposer 将系统 Prompt + 场景 Prompt + 用户配置 + 偏好合成最终 Prompt。  
- **技能体系**：Skill 作为可配置的“能力单元”，由场景或系统 Prompt 决定何时调用。  
- **自我进化**：FeedbackCollector 收集反馈 → PreferenceLearner 学习用户/Session 偏好 → PromptEvolver 将偏好写回 Prompt。  
- **调度与定时任务**：CronJobs 周期性批量跑用户偏好学习，也提供手动触发接口。

### 4. 典型用例

- **文档与 PPT 生成**：  
  用户提问「写一个 AI 发展史 PPT，风格参考 Apple 官网」，系统自动命中 PPT 场景 + PPT 技能，生成 PPTX 上传到 MinIO，并在前端展示下载入口。

- **代码与工具助手**：  
  用户提问「写一个 python 爬虫 / 冒泡排序」，系统命中开发类场景，加载对应 Prompt 与工具，生成代码并可继续追问优化。

### 5. 当前版本状态 & 下阶段

- 已完成：自动场景匹配、技能体系、自我进化主链路、反馈弹框稳定交互、会话与工具历史展示。  
- Tag：`v0.7.1-dev-feat`。  
- 下一版本命名：`v0.7.2-dev`，聚焦自我进化可视化、更多业务场景与技能扩展。

