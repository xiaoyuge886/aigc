<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skillå¼€å‘ç¤ºä¾‹</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .diagram-container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #607D8B;
            padding-bottom: 10px;
        }
        .description {
            color: #666;
            line-height: 1.6;
            margin: 20px 0;
        }
        .code-example {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            border-left: 4px solid #607D8B;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>Skillå¼€å‘ç¤ºä¾‹</h1>
    <div class="description">
        <p>å±•ç¤ºä¸åŒç±»å‹Skillçš„å¼€å‘æµç¨‹ä¸ä»£ç ç¤ºä¾‹ã€‚</p>
    </div>

    <div class="diagram-container">
        <div class="mermaid">
flowchart LR
    subgraph Skillç±»å‹
        A[MCPå·¥å…·]
        B[è‡ªå®šä¹‰Skill]
        C[æŠ€èƒ½ç»„åˆ]
    end

    subgraph å¼€å‘æ­¥éª¤
        A1[éµå¾ªMCPåè®®]
        A2[å°è£…æ ‡å‡†æ¥å£]
        A3[æ³¨å†Œåˆ°MCP Server]

        B1[ç¼–å†™Pythonå‡½æ•°]
        B2[å®šä¹‰è¾“å…¥è¾“å‡º]
        B3[æ·»åŠ æ–‡æ¡£è¯´æ˜]
        B4[æ³¨å†Œåˆ°Skillä»“åº“]

        C1[ä¸²è”å¤šä¸ªSkill]
        C2[ç¼–æ’æ‰§è¡Œé¡ºåº]
        C3[å¤„ç†æ•°æ®æµè½¬]
    end

    A --> A1 --> A2 --> A3
    B --> B1 --> B2 --> B3 --> B4
    C --> C1 --> C2 --> C3

    A3 -.å¯ç”¨.-> C1
    B4 -.å¯ç”¨.-> C1

    style Skillç±»å‹ fill:#e3f2fd
    style å¼€å‘æ­¥éª¤ fill:#fff3e0
        </div>
    </div>

    <div class="code-example">
        <h3>ğŸ’» Skillä»£ç ç¤ºä¾‹</h3>

        <h4>1. MCPå·¥å…·ç¤ºä¾‹ï¼ˆæ•°æ®åº“æŸ¥è¯¢ï¼‰</h4>
        <pre>
@register_mcp_tool
async def query_database(query: str) -> dict:
    """æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢å¹¶è¿”å›ç»“æœ"""
    # éªŒè¯SQLå®‰å…¨æ€§
    if not validate_sql(query):
        raise ValueError("Invalid SQL query")

    # æ‰§è¡ŒæŸ¥è¯¢
    result = await db.execute(query)
    return {"rows": result, "count": len(result)}
        </pre>

        <h4>2. è‡ªå®šä¹‰Skillç¤ºä¾‹ï¼ˆæ•°æ®åˆ†æï¼‰</h4>
        <pre>
from skills import Skill

@Skill(name="data_analysis")
async def analyze_sales_data(data: List[Dict]) -> Dict:
    """
    åˆ†æé”€å”®æ•°æ®ï¼Œç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š

    Args:
        data: é”€å”®è®°å½•åˆ—è¡¨

    Returns:
        åŒ…å«ç»Ÿè®¡æŒ‡æ ‡çš„å­—å…¸
    """
    total_sales = sum(item['amount'] for item in data)
    avg_sales = total_sales / len(data)

    return {
        "total": total_sales,
        "average": avg_sales,
        "top_products": get_top_products(data)
    }
        </pre>

        <h4>3. æŠ€èƒ½ç»„åˆç¤ºä¾‹ï¼ˆæ•°æ®æŸ¥è¯¢â†’åˆ†æâ†’æŠ¥å‘Šï¼‰</h4>
        <pre>
@Skill(name="sales_report_workflow")
async def generate_sales_report(date_range: str) -> str:
    """ç”Ÿæˆé”€å”®æŠ¥å‘Šå·¥ä½œæµ"""
    # Step 1: æŸ¥è¯¢æ•°æ®
    query_result = await query_database(
        f"SELECT * FROM sales WHERE date BETWEEN {date_range}"
    )

    # Step 2: åˆ†ææ•°æ®
    analysis = await analyze_sales_data(query_result['rows'])

    # Step 3: ç”ŸæˆæŠ¥å‘Š
    report = await generate_markdown_report(analysis)

    return report
        </pre>
    </div>
</body>
</html>
