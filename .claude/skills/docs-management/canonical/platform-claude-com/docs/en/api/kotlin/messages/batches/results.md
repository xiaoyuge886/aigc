---
source_url: https://platform.claude.com/docs/en/api/kotlin/messages/batches/results
source_type: sitemap
content_hash: sha256:b27b8cb1492cc4cf70b637f9522a5454b9f50610b50f703401f474e2b308531a
sitemap_url: https://platform.claude.com/sitemap.xml
fetch_method: markdown
---

## Results

`messages().batches().resultsStreaming(BatchResultsParamsparams = BatchResultsParams.none(), RequestOptionsrequestOptions = RequestOptions.none()) : MessageBatchIndividualResponse`

**get** `/v1/messages/batches/{message_batch_id}/results`

Streams the results of a Message Batch as a `.jsonl` file.

Each line in the file is a JSON object containing the result of a single request in the Message Batch. Results are not guaranteed to be in the same order as requests. Use the `custom_id` field to match results to requests.

Learn more about the Message Batches API in our [user guide](https://docs.claude.com/en/docs/build-with-claude/batch-processing)

### Parameters

- `params: BatchResultsParams`

  - `messageBatchId: Optional<String>`

    ID of the Message Batch.

### Returns

- `class MessageBatchIndividualResponse:`

  This is a single line in the response `.jsonl` file and does not represent the response as a whole.

  - `customId: String`

    Developer-provided ID created for each request in a Message Batch. Useful for matching results to requests, as results may be given out of request order.

    Must be unique for each request within the Message Batch.

  - `result: MessageBatchResult`

    Processing result for this request.

    Contains a Message output if processing was successful, an error response if processing failed, or the reason why processing was not attempted, such as cancellation or expiration.

    - `class MessageBatchSucceededResult:`

      - `message: Message`

        - `id: String`

          Unique object identifier.

          The format and length of IDs may change over time.

        - `content: List<ContentBlock>`

          Content generated by the model.

          This is an array of content blocks, each of which has a `type` that determines its shape.

          Example:

          ```json
          [{"type": "text", "text": "Hi, I'm Claude."}]
          ```

          If the request input `messages` ended with an `assistant` turn, then the response `content` will continue directly from that last turn. You can use this to constrain the model's output.

          For example, if the input `messages` were:

          ```json
          [
            {"role": "user", "content": "What's the Greek name for Sun? (A) Sol (B) Helios (C) Sun"},
            {"role": "assistant", "content": "The best answer is ("}
          ]
          ```

          Then the response `content` might be:

          ```json
          [{"type": "text", "text": "B)"}]
          ```

          - `class TextBlock:`

            - `citations: Optional<List<TextCitation>>`

              Citations supporting the text block.

              The type of citation returned will depend on the type of document being cited. Citing a PDF results in `page_location`, plain text results in `char_location`, and content document results in `content_block_location`.

              - `class CitationCharLocation:`

                - `citedText: String`

                - `documentIndex: Long`

                - `documentTitle: Optional<String>`

                - `endCharIndex: Long`

                - `fileId: Optional<String>`

                - `startCharIndex: Long`

                - `type: JsonValue; "char_location"constant`

                  - `CHAR_LOCATION("char_location")`

              - `class CitationPageLocation:`

                - `citedText: String`

                - `documentIndex: Long`

                - `documentTitle: Optional<String>`

                - `endPageNumber: Long`

                - `fileId: Optional<String>`

                - `startPageNumber: Long`

                - `type: JsonValue; "page_location"constant`

                  - `PAGE_LOCATION("page_location")`

              - `class CitationContentBlockLocation:`

                - `citedText: String`

                - `documentIndex: Long`

                - `documentTitle: Optional<String>`

                - `endBlockIndex: Long`

                - `fileId: Optional<String>`

                - `startBlockIndex: Long`

                - `type: JsonValue; "content_block_location"constant`

                  - `CONTENT_BLOCK_LOCATION("content_block_location")`

              - `class CitationsWebSearchResultLocation:`

                - `citedText: String`

                - `encryptedIndex: String`

                - `title: Optional<String>`

                - `type: JsonValue; "web_search_result_location"constant`

                  - `WEB_SEARCH_RESULT_LOCATION("web_search_result_location")`

                - `url: String`

              - `class CitationsSearchResultLocation:`

                - `citedText: String`

                - `endBlockIndex: Long`

                - `searchResultIndex: Long`

                - `source: String`

                - `startBlockIndex: Long`

                - `title: Optional<String>`

                - `type: JsonValue; "search_result_location"constant`

                  - `SEARCH_RESULT_LOCATION("search_result_location")`

            - `text: String`

            - `type: JsonValue; "text"constant`

              - `TEXT("text")`

          - `class ThinkingBlock:`

            - `signature: String`

            - `thinking: String`

            - `type: JsonValue; "thinking"constant`

              - `THINKING("thinking")`

          - `class RedactedThinkingBlock:`

            - `data: String`

            - `type: JsonValue; "redacted_thinking"constant`

              - `REDACTED_THINKING("redacted_thinking")`

          - `class ToolUseBlock:`

            - `id: String`

            - `input: Input`

            - `name: String`

            - `type: JsonValue; "tool_use"constant`

              - `TOOL_USE("tool_use")`

          - `class ServerToolUseBlock:`

            - `id: String`

            - `input: Input`

            - `name: JsonValue; "web_search"constant`

              - `WEB_SEARCH("web_search")`

            - `type: JsonValue; "server_tool_use"constant`

              - `SERVER_TOOL_USE("server_tool_use")`

          - `class WebSearchToolResultBlock:`

            - `content: WebSearchToolResultBlockContent`

              - `class WebSearchToolResultError:`

                - `errorCode: ErrorCode`

                  - `INVALID_TOOL_INPUT("invalid_tool_input")`

                  - `UNAVAILABLE("unavailable")`

                  - `MAX_USES_EXCEEDED("max_uses_exceeded")`

                  - `TOO_MANY_REQUESTS("too_many_requests")`

                  - `QUERY_TOO_LONG("query_too_long")`

                - `type: JsonValue; "web_search_tool_result_error"constant`

                  - `WEB_SEARCH_TOOL_RESULT_ERROR("web_search_tool_result_error")`

              - `List<WebSearchResultBlock>`

                - `encryptedContent: String`

                - `pageAge: Optional<String>`

                - `title: String`

                - `type: JsonValue; "web_search_result"constant`

                  - `WEB_SEARCH_RESULT("web_search_result")`

                - `url: String`

            - `toolUseId: String`

            - `type: JsonValue; "web_search_tool_result"constant`

              - `WEB_SEARCH_TOOL_RESULT("web_search_tool_result")`

        - `model: Model`

          The model that will complete your prompt.

          See [models](https://docs.anthropic.com/en/docs/models-overview) for additional details and options.

          - `CLAUDE_OPUS_4_5_20251101("claude-opus-4-5-20251101")`

            Premium model combining maximum intelligence with practical performance

          - `CLAUDE_OPUS_4_5("claude-opus-4-5")`

            Premium model combining maximum intelligence with practical performance

          - `CLAUDE_3_7_SONNET_LATEST("claude-3-7-sonnet-latest")`

            High-performance model with early extended thinking

          - `CLAUDE_3_7_SONNET_20250219("claude-3-7-sonnet-20250219")`

            High-performance model with early extended thinking

          - `CLAUDE_3_5_HAIKU_LATEST("claude-3-5-haiku-latest")`

            Fastest and most compact model for near-instant responsiveness

          - `CLAUDE_3_5_HAIKU_20241022("claude-3-5-haiku-20241022")`

            Our fastest model

          - `CLAUDE_HAIKU_4_5("claude-haiku-4-5")`

            Hybrid model, capable of near-instant responses and extended thinking

          - `CLAUDE_HAIKU_4_5_20251001("claude-haiku-4-5-20251001")`

            Hybrid model, capable of near-instant responses and extended thinking

          - `CLAUDE_SONNET_4_20250514("claude-sonnet-4-20250514")`

            High-performance model with extended thinking

          - `CLAUDE_SONNET_4_0("claude-sonnet-4-0")`

            High-performance model with extended thinking

          - `CLAUDE_4_SONNET_20250514("claude-4-sonnet-20250514")`

            High-performance model with extended thinking

          - `CLAUDE_SONNET_4_5("claude-sonnet-4-5")`

            Our best model for real-world agents and coding

          - `CLAUDE_SONNET_4_5_20250929("claude-sonnet-4-5-20250929")`

            Our best model for real-world agents and coding

          - `CLAUDE_OPUS_4_0("claude-opus-4-0")`

            Our most capable model

          - `CLAUDE_OPUS_4_20250514("claude-opus-4-20250514")`

            Our most capable model

          - `CLAUDE_4_OPUS_20250514("claude-4-opus-20250514")`

            Our most capable model

          - `CLAUDE_OPUS_4_1_20250805("claude-opus-4-1-20250805")`

            Our most capable model

          - `CLAUDE_3_OPUS_LATEST("claude-3-opus-latest")`

            Excels at writing and complex tasks

          - `CLAUDE_3_OPUS_20240229("claude-3-opus-20240229")`

            Excels at writing and complex tasks

          - `CLAUDE_3_HAIKU_20240307("claude-3-haiku-20240307")`

            Our previous most fast and cost-effective

        - `role: JsonValue; "assistant"constant`

          Conversational role of the generated message.

          This will always be `"assistant"`.

          - `ASSISTANT("assistant")`

        - `stopReason: Optional<StopReason>`

          The reason that we stopped.

          This may be one the following values:

          * `"end_turn"`: the model reached a natural stopping point
          * `"max_tokens"`: we exceeded the requested `max_tokens` or the model's maximum
          * `"stop_sequence"`: one of your provided custom `stop_sequences` was generated
          * `"tool_use"`: the model invoked one or more tools
          * `"pause_turn"`: we paused a long-running turn. You may provide the response back as-is in a subsequent request to let the model continue.
          * `"refusal"`: when streaming classifiers intervene to handle potential policy violations

          In non-streaming mode this value is always non-null. In streaming mode, it is null in the `message_start` event and non-null otherwise.

          - `END_TURN("end_turn")`

          - `MAX_TOKENS("max_tokens")`

          - `STOP_SEQUENCE("stop_sequence")`

          - `TOOL_USE("tool_use")`

          - `PAUSE_TURN("pause_turn")`

          - `REFUSAL("refusal")`

        - `stopSequence: Optional<String>`

          Which custom stop sequence was generated, if any.

          This value will be a non-null string if one of your custom stop sequences was generated.

        - `type: JsonValue; "message"constant`

          Object type.

          For Messages, this is always `"message"`.

          - `MESSAGE("message")`

        - `usage: Usage`

          Billing and rate-limit usage.

          Anthropic's API bills and rate-limits by token counts, as tokens represent the underlying cost to our systems.

          Under the hood, the API transforms requests into a format suitable for the model. The model's output then goes through a parsing stage before becoming an API response. As a result, the token counts in `usage` will not match one-to-one with the exact visible content of an API request or response.

          For example, `output_tokens` will be non-zero, even for an empty string response from Claude.

          Total input tokens in a request is the summation of `input_tokens`, `cache_creation_input_tokens`, and `cache_read_input_tokens`.

          - `cacheCreation: Optional<CacheCreation>`

            Breakdown of cached tokens by TTL

            - `ephemeral1hInputTokens: Long`

              The number of input tokens used to create the 1 hour cache entry.

            - `ephemeral5mInputTokens: Long`

              The number of input tokens used to create the 5 minute cache entry.

          - `cacheCreationInputTokens: Optional<Long>`

            The number of input tokens used to create the cache entry.

          - `cacheReadInputTokens: Optional<Long>`

            The number of input tokens read from the cache.

          - `inputTokens: Long`

            The number of input tokens which were used.

          - `outputTokens: Long`

            The number of output tokens which were used.

          - `serverToolUse: Optional<ServerToolUsage>`

            The number of server tool requests.

            - `webSearchRequests: Long`

              The number of web search tool requests.

          - `serviceTier: Optional<ServiceTier>`

            If the request used the priority, standard, or batch tier.

            - `STANDARD("standard")`

            - `PRIORITY("priority")`

            - `BATCH("batch")`

      - `type: JsonValue; "succeeded"constant`

        - `SUCCEEDED("succeeded")`

    - `class MessageBatchErroredResult:`

      - `error: ErrorResponse`

        - `error: ErrorObject`

          - `class InvalidRequestError:`

            - `message: String`

            - `type: JsonValue; "invalid_request_error"constant`

              - `INVALID_REQUEST_ERROR("invalid_request_error")`

          - `class AuthenticationError:`

            - `message: String`

            - `type: JsonValue; "authentication_error"constant`

              - `AUTHENTICATION_ERROR("authentication_error")`

          - `class BillingError:`

            - `message: String`

            - `type: JsonValue; "billing_error"constant`

              - `BILLING_ERROR("billing_error")`

          - `class PermissionError:`

            - `message: String`

            - `type: JsonValue; "permission_error"constant`

              - `PERMISSION_ERROR("permission_error")`

          - `class NotFoundError:`

            - `message: String`

            - `type: JsonValue; "not_found_error"constant`

              - `NOT_FOUND_ERROR("not_found_error")`

          - `class RateLimitError:`

            - `message: String`

            - `type: JsonValue; "rate_limit_error"constant`

              - `RATE_LIMIT_ERROR("rate_limit_error")`

          - `class GatewayTimeoutError:`

            - `message: String`

            - `type: JsonValue; "timeout_error"constant`

              - `TIMEOUT_ERROR("timeout_error")`

          - `class ApiErrorObject:`

            - `message: String`

            - `type: JsonValue; "api_error"constant`

              - `API_ERROR("api_error")`

          - `class OverloadedError:`

            - `message: String`

            - `type: JsonValue; "overloaded_error"constant`

              - `OVERLOADED_ERROR("overloaded_error")`

        - `requestId: Optional<String>`

        - `type: JsonValue; "error"constant`

          - `ERROR("error")`

      - `type: JsonValue; "errored"constant`

        - `ERRORED("errored")`

    - `class MessageBatchCanceledResult:`

      - `type: JsonValue; "canceled"constant`

        - `CANCELED("canceled")`

    - `class MessageBatchExpiredResult:`

      - `type: JsonValue; "expired"constant`

        - `EXPIRED("expired")`

### Example

```kotlin
package com.anthropic.example

import com.anthropic.client.AnthropicClient
import com.anthropic.client.okhttp.AnthropicOkHttpClient
import com.anthropic.core.http.StreamResponse
import com.anthropic.models.messages.batches.BatchResultsParams
import com.anthropic.models.messages.batches.MessageBatchIndividualResponse

fun main() {
    val client: AnthropicClient = AnthropicOkHttpClient.fromEnv()

    val messageBatchIndividualResponse: StreamResponse<MessageBatchIndividualResponse> = client.messages().batches().resultsStreaming("message_batch_id")
}
```
